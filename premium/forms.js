/*! For license information please see forms.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=function(e){e.system;var t=e.params,r=(e.theme,t.id),n=t.label,o=t.type,a=t.name,i=t.options,c=t.required,l=t.placeholder,u=t.default,s=t.maxlength,f=t.rows,d=t.className,p=i?JSON.parse(decodeURIComponent(i)):null,m="".concat("mwai-form-field mwai-form-field-"+o).concat(d?" "+d:""),h=!0===c;switch(o){case"select":return React.createElement("fieldset",{id:r,className:m,"data-form-name":a,"data-form-type":"select","data-form-required":h},React.createElement("legend",null,n),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("select",{name:a,required:"yes"===c,"data-form-required":h},p&&p.map((function(e){return React.createElement("option",{key:e.value,value:e.value},e.label)})))));case"radio":return React.createElement("fieldset",{id:r,className:m,"data-form-name":a,"data-form-type":"radio","data-form-required":h},React.createElement("legend",null,n),p&&p.map((function(e){return React.createElement("div",{className:"mwai-form-field-container",key:e.value},React.createElement("input",{type:"radio",name:a,value:e.value,required:"yes"===c,"data-form-required":h}),React.createElement("label",null,e.label))})));case"checkbox":return React.createElement("fieldset",{id:r,className:m,"data-form-name":a,"data-form-type":"checkbox","data-form-required":h},React.createElement("legend",null,n),p&&p.map((function(e){return React.createElement("div",{className:"mwai-form-field-container",key:e.value},React.createElement("input",{id:r,type:"checkbox",name:a,value:e.value,required:"yes"===c,"data-form-required":h}),React.createElement("label",null,e.label))})));case"textarea":return React.createElement("fieldset",{className:m,"data-form-name":a,"data-form-type":"textarea","data-form-required":h},React.createElement("legend",null,n),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("textarea",{id:r,name:a,placeholder:l,maxLength:s,rows:f,required:"yes"===c,"data-form-required":h,defaultValue:u})));default:return React.createElement("fieldset",{className:m,"data-form-name":a,"data-form-type":"input","data-form-required":h},React.createElement("legend",null,n),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("input",{id:r,type:"text",name:a,placeholder:l,maxLength:s,"data-form-required":h,defaultValue:u,required:"yes"===c})))}},r=React;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=function(e){var t=[];return function(r,o){if("object"===n(o)&&null!==o){if(-1!==t.indexOf(o)){if(!e)throw console.warn("Circular reference found.",{key:r,value:o,cache:t,cacheIndex:t.indexOf(o)}),new Error("Circular reference found. Cancelled.");return}t.push(o)}return o}};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return JSON.stringify(e,o(r),t)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}e.n(r)().Component;const c=["children","options"];var l,u,s;(s=l||(l={})).blockQuote="0",s.breakLine="1",s.breakThematic="2",s.codeBlock="3",s.codeFenced="4",s.codeInline="5",s.footnote="6",s.footnoteReference="7",s.gfmTask="8",s.heading="9",s.headingSetext="10",s.htmlBlock="11",s.htmlComment="12",s.htmlSelfClosing="13",s.image="14",s.link="15",s.linkAngleBraceStyleDetector="16",s.linkBareUrlDetector="17",s.linkMailtoDetector="18",s.newlineCoalescer="19",s.orderedList="20",s.paragraph="21",s.ref="22",s.refImage="23",s.refLink="24",s.table="25",s.tableSeparator="26",s.text="27",s.textBolded="28",s.textEmphasized="29",s.textEscaped="30",s.textMarked="31",s.textStrikethroughed="32",s.unorderedList="33",function(e){e[e.MAX=0]="MAX",e[e.HIGH=1]="HIGH",e[e.MED=2]="MED",e[e.LOW=3]="LOW",e[e.MIN=4]="MIN"}(u||(u={}));const f=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{for:"htmlFor"}),d={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},p=["style","script"],m=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,h=/mailto:/i,y=/\n{2,}$/,v=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,g=/^ *> ?/gm,b=/^ {2,}\n/,w=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,x=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,k=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,E=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,S=/^(?:\n *)*\n/,O=/\r\n?/g,A=/^\[\^([^\]]+)](:.*)\n/,j=/^\[\^([^\]]+)]/,L=/\f/g,T=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,R=/^\s*?\[(x|\s)\]/,N=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,I=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,C=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,q=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,P=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,_=/^<!--[\s\S]*?(?:-->)/,M=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,F=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,$=/^\{.*\}$/,U=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,G=/^<([^ >]+@[^ >]+)>/,V=/^<([^ >]+:\/[^ >]+)>/,z=/-([a-z])?/gi,D=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,B=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,H=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,J=/^\[([^\]]*)\] ?\[([^\]]*)\]/,W=/(\[|\])/g,X=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Y=/\t/g,Z=/^ *\| */,Q=/(^ *\||\| *$)/g,K=/ *$/,ee=/^ *:-+: *$/,te=/^ *:-+ *$/,re=/^ *-+: *$/,ne=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,oe=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,ae=/^==((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)==/,ie=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,ce=/^\\([^0-9A-Za-z\s])/,le=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,ue=/^\n+/,se=/^([ \t]*)/,fe=/\\([^\\])/g,de=/ *\n+$/,pe=/(?:^|\n)( *)$/,me="(?:\\d+\\.)",he="(?:[*+-])";function ye(e){return"( *)("+(1===e?me:he)+") +"}const ve=ye(1),ge=ye(2);function be(e){return new RegExp("^"+(1===e?ve:ge))}const we=be(1),xe=be(2);function ke(e){return new RegExp("^"+(1===e?ve:ge)+"[^\\n]*(?:\\n(?!\\1"+(1===e?me:he)+" )[^\\n]*)*(\\n|$)","gm")}const Ee=ke(1),Se=ke(2);function Oe(e){const t=1===e?me:he;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const Ae=Oe(1),je=Oe(2);function Le(e,t){const r=1===t,n=r?Ae:je,o=r?Ee:Se,a=r?we:xe;return{match(e,t,r){const o=pe.exec(r);return o&&(t.list||!t.inline&&!t.simple)?n.exec(e=o[1]+e):null},order:1,parse(e,t,n){const i=r?+e[2]:void 0,c=e[0].replace(y,"\n").match(o);let l=!1;return{items:c.map((function(e,r){const o=a.exec(e)[0].length,i=new RegExp("^ {1,"+o+"}","gm"),u=e.replace(i,"").replace(a,""),s=r===c.length-1,f=-1!==u.indexOf("\n\n")||s&&l;l=f;const d=n.inline,p=n.list;let m;n.list=!0,f?(n.inline=!1,m=u.replace(de,"\n\n")):(n.inline=!0,m=u.replace(de,""));const h=t(m,n);return n.inline=d,n.list=p,h})),ordered:r,start:i}},render:(t,r,n)=>e(t.ordered?"ol":"ul",{key:n.key,start:"20"===t.type?t.start:void 0},t.items.map((function(t,o){return e("li",{key:o},r(t,n))})))}}const Te=/^\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Re=/^!\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Ne=[v,x,k,N,C,I,_,D,Ee,Ae,Se,je],Ie=[...Ne,/^[^\n]+(?:  \n|\n{2,})/,q,F];function Ce(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function qe(e){return re.test(e)?"right":ee.test(e)?"center":te.test(e)?"left":null}function Pe(e,t,r){const n=r.inTable;r.inTable=!0;const o=t(e.trim(),r);r.inTable=n;let a=[[]];return o.forEach((function(e,t){"26"===e.type?0!==t&&t!==o.length-1&&a.push([]):("27"!==e.type||null!=o[t+1]&&"26"!==o[t+1].type||(e.text=e.text.replace(K,"")),a[a.length-1].push(e))})),a}function _e(e,t,r){r.inline=!0;const n=Pe(e[1],t,r),o=e[2].replace(Q,"").split("|").map(qe),a=function(e,t,r){return e.trim().split("\n").map((function(e){return Pe(e,t,r)}))}(e[3],t,r);return r.inline=!1,{align:o,cells:a,header:n,type:"25"}}function Me(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Fe(e){return function(t,r){return r.inline?e.exec(t):null}}function $e(e){return function(t,r){return r.inline||r.simple?e.exec(t):null}}function Ue(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function Ge(e){return function(t){return e.exec(t)}}function Ve(e,t,r){if(t.inline||t.simple)return null;if(r&&!r.endsWith("\n"))return null;let n="";e.split("\n").every((e=>!Ne.some((t=>t.test(e)))&&(n+=e+"\n",e.trim())));const o=n.trimEnd();return""==o?null:[n,o]}function ze(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch(e){return null}return e}function De(e){return e.replace(fe,"$1")}function Be(e,t,r){const n=r.inline||!1,o=r.simple||!1;r.inline=!0,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=o,a}function He(e,t,r){const n=r.inline||!1,o=r.simple||!1;r.inline=!1,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=o,a}function Je(e,t,r){return r.inline=!1,e(t,r)}const We=(e,t,r)=>({children:Be(t,e[1],r)});function Xe(){return{}}function Ye(){return null}function Ze(...e){return e.filter(Boolean).join(" ")}function Qe(e,t,r){let n=e;const o=t.split(".");for(;o.length&&(n=n[o[0]],void 0!==n);)o.shift();return n||r}function Ke(e,t={}){t.overrides=t.overrides||{},t.slugify=t.slugify||Ce,t.namedCodesToUnicode=t.namedCodesToUnicode?i({},d,t.namedCodesToUnicode):d;const n=t.createElement||r.createElement;function o(e,r,...o){const a=Qe(t.overrides,`${e}.props`,{});return n(function(e,t){const r=Qe(t,e);return r?"function"==typeof r||"object"==typeof r&&"render"in r?r:Qe(t,`${e}.component`,e):e}(e,t.overrides),i({},r,a,{className:Ze(null==r?void 0:r.className,a.className)||void 0}),...o)}function a(e){e=e.replace(T,"");let n=!1;t.forceInline?n=!0:t.forceBlock||(n=!1===X.test(e));const a=Q(y(n?e:`${e.trimEnd().replace(ue,"")}\n\n`,{inline:n}));for(;"string"==typeof a[a.length-1]&&!a[a.length-1].trim();)a.pop();if(null===t.wrapper)return a;const i=t.wrapper||(n?"span":"div");let c;if(a.length>1||t.forceWrapper)c=a;else{if(1===a.length)return c=a[0],"string"==typeof c?o("span",{key:"outer"},c):c;c=null}return r.createElement(i,{key:"outer"},c)}function c(e){const t=e.match(m);return t?t.reduce((function(e,t,n){const o=t.indexOf("=");if(-1!==o){const i=function(e){return-1!==e.indexOf("-")&&null===e.match(M)&&(e=e.replace(z,(function(e,t){return t.toUpperCase()}))),e}(t.slice(0,o)).trim(),c=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(t.slice(o+1).trim()),l=f[i]||i,u=e[l]=function(e,t){return"style"===e?t.split(/;\s?/).reduce((function(e,t){const r=t.slice(0,t.indexOf(":"));return e[r.replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(r.length+1).trim(),e}),{}):"href"===e||"src"===e?ze(t):(t.match($)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}(i,c);"string"==typeof u&&(q.test(u)||F.test(u))&&(e[l]=r.cloneElement(a(u.trim()),{key:n}))}else"style"!==t&&(e[f[t]||t]=!0);return e}),{}):null}const l=[],u={},s={0:{match:Ue(v),order:1,parse:(e,t,r)=>({children:t(e[0].replace(g,""),r)}),render:(e,t,r)=>o("blockquote",{key:r.key},t(e.children,r))},1:{match:Ge(b),order:1,parse:Xe,render:(e,t,r)=>o("br",{key:r.key})},2:{match:Ue(w),order:1,parse:Xe,render:(e,t,r)=>o("hr",{key:r.key})},3:{match:Ue(k),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(e,t,r)=>o("pre",{key:r.key},o("code",i({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},4:{match:Ue(x),order:0,parse:e=>({attrs:c(e[3]||""),lang:e[2]||void 0,text:e[4],type:"3"})},5:{match:$e(E),order:3,parse:e=>({text:e[2]}),render:(e,t,r)=>o("code",{key:r.key},e.text)},6:{match:Ue(A),order:0,parse:e=>(l.push({footnote:e[2],identifier:e[1]}),{}),render:Ye},7:{match:Fe(j),order:1,parse:e=>({target:`#${t.slugify(e[1])}`,text:e[1]}),render:(e,t,r)=>o("a",{key:r.key,href:ze(e.target)},o("sup",{key:r.key},e.text))},8:{match:Fe(R),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,r)=>o("input",{checked:e.completed,key:r.key,readOnly:!0,type:"checkbox"})},9:{match:Ue(t.enforceAtxHeadings?I:N),order:1,parse:(e,r,n)=>({children:Be(r,e[2],n),id:t.slugify(e[2]),level:e[1].length}),render:(e,t,r)=>o(`h${e.level}`,{id:e.id,key:r.key},t(e.children,r))},10:{match:Ue(C),order:0,parse:(e,t,r)=>({children:Be(t,e[1],r),level:"="===e[2]?1:2,type:"9"})},11:{match:Ge(q),order:1,parse(e,t,r){const[,n]=e[3].match(se),o=new RegExp(`^${n}`,"gm"),a=e[3].replace(o,""),i=(l=a,Ie.some((e=>e.test(l)))?Je:Be);var l;const u=e[1].toLowerCase(),s=-1!==p.indexOf(u),f={attrs:c(e[2]),noInnerParse:s,tag:s?u:e[1]};return r.inAnchor=r.inAnchor||"a"===u,s?f.text=e[3]:f.children=i(t,a,r),r.inAnchor=!1,f},render:(e,t,r)=>o(e.tag,i({key:r.key},e.attrs),e.text||t(e.children,r))},13:{match:Ge(F),order:1,parse:e=>({attrs:c(e[2]||""),tag:e[1]}),render:(e,t,r)=>o(e.tag,i({},e.attrs,{key:r.key}))},12:{match:Ge(_),order:1,parse:()=>({}),render:Ye},14:{match:$e(Re),order:1,parse:e=>({alt:e[1],target:De(e[2]),title:e[3]}),render:(e,t,r)=>o("img",{key:r.key,alt:e.alt||void 0,title:e.title||void 0,src:ze(e.target)})},15:{match:Fe(Te),order:3,parse:(e,t,r)=>({children:He(t,e[1],r),target:De(e[2]),title:e[3]}),render:(e,t,r)=>o("a",{key:r.key,href:ze(e.target),title:e.title},t(e.children,r))},16:{match:Fe(V),order:0,parse:e=>({children:[{text:e[1],type:"27"}],target:e[1],type:"15"})},17:{match:(e,t)=>t.inAnchor?null:Fe(U)(e,t),order:0,parse:e=>({children:[{text:e[1],type:"27"}],target:e[1],title:void 0,type:"15"})},18:{match:Fe(G),order:0,parse(e){let t=e[1],r=e[1];return h.test(r)||(r="mailto:"+r),{children:[{text:t.replace("mailto:",""),type:"27"}],target:r,type:"15"}}},20:Le(o,1),33:Le(o,2),19:{match:Ue(S),order:3,parse:Xe,render:()=>"\n"},21:{match:Ve,order:3,parse:We,render:(e,t,r)=>o("p",{key:r.key},t(e.children,r))},22:{match:Fe(B),order:0,parse:e=>(u[e[1]]={target:e[2],title:e[4]},{}),render:Ye},23:{match:$e(H),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,t,r)=>o("img",{key:r.key,alt:e.alt,src:ze(u[e.ref].target),title:u[e.ref].title})},24:{match:Fe(J),order:0,parse:(e,t,r)=>({children:t(e[1],r),fallbackChildren:t(e[0].replace(W,"\\$1"),r),ref:e[2]}),render:(e,t,r)=>u[e.ref]?o("a",{key:r.key,href:ze(u[e.ref].target),title:u[e.ref].title},t(e.children,r)):o("span",{key:r.key},t(e.fallbackChildren,r))},25:{match:Ue(D),order:1,parse:_e,render:(e,t,r)=>o("table",{key:r.key},o("thead",null,o("tr",null,e.header.map((function(n,a){return o("th",{key:a,style:Me(e,a)},t(n,r))})))),o("tbody",null,e.cells.map((function(n,a){return o("tr",{key:a},n.map((function(n,a){return o("td",{key:a,style:Me(e,a)},t(n,r))})))}))))},26:{match:function(e,t){return t.inTable?(t.inline=!0,Z.exec(e)):null},order:1,parse:function(){return{type:"26"}},render:()=>" | "},27:{match:Ge(le),order:4,parse:e=>({text:e[0].replace(P,((e,r)=>t.namedCodesToUnicode[r]?t.namedCodesToUnicode[r]:e))}),render:e=>e.text},28:{match:$e(ne),order:2,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,r)=>o("strong",{key:r.key},t(e.children,r))},29:{match:$e(oe),order:3,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,r)=>o("em",{key:r.key},t(e.children,r))},30:{match:$e(ce),order:1,parse:e=>({text:e[1],type:"27"})},31:{match:$e(ae),order:3,parse:We,render:(e,t,r)=>o("mark",{key:r.key},t(e.children,r))},32:{match:$e(ie),order:3,parse:We,render:(e,t,r)=>o("del",{key:r.key},t(e.children,r))}};!0===t.disableParsingRawHTML&&(delete s[11],delete s[13]);const y=function(e){let t=Object.keys(e);function r(n,o){let a=[],i="";for(;n;){let c=0;for(;c<t.length;){const l=t[c],u=e[l],s=u.match(n,o,i);if(s){const e=s[0];n=n.substring(e.length);const t=u.parse(s,r,o);null==t.type&&(t.type=l),a.push(t),i=e;break}c++}}return a}return t.sort((function(t,r){let n=e[t].order,o=e[r].order;return n!==o?n-o:1})),function(e,t){return r(function(e){return e.replace(O,"\n").replace(L,"").replace(Y,"    ")}(e),t)}}(s),Q=(K=function(e,t){return function(r,n,o){const a=e[r.type].render;return t?t((()=>a(r,n,o)),r,n,o):a(r,n,o)}}(s,t.renderRule),function e(t,r={}){if(Array.isArray(t)){const n=r.key,o=[];let a=!1;for(let n=0;n<t.length;n++){r.key=n;const i=e(t[n],r),c="string"==typeof i;c&&a?o[o.length-1]+=i:null!==i&&o.push(i),a=c}return r.key=n,o}return K(t,e,r)});var K;const ee=a(e);return l.length?o("div",null,ee,o("footer",{key:"footer"},l.map((function(e){return o("div",{id:t.slugify(e.identifier),key:e.identifier},e.identifier,Q(y(e.footnote,{inline:!0})))})))):ee}const et=e=>{let{children:t,options:n}=e,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(o[r]=e[r]);return o}(e,c);return r.cloneElement(Ke(t,n),o)};function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(){rt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new R(n||[]);return o(i,"_invoke",{value:A(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==r&&n.call(k,i)&&(w=k);var E=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==tt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?h:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(tt(t)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(E),u(E,l,"Generator"),u(E,i,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ot(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function at(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ot(a,n,o,i,c,"next",e)}function c(e){ot(a,n,o,i,c,"throw",e)}i(void 0)}))}}var it=wp.element,ct=it.useMemo,lt=it.useEffect,ut=it.useState;function st(e,t){return ft.apply(this,arguments)}function ft(){return ft=at(rt().mark((function e(t,r){var n,o,a,i,c,l,u,s,f,d,p,m,h,y,v=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>2&&void 0!==v[2]?v[2]:null,r){e.next=14;break}return e.prev=2,e.next=5,t.json();case 5:return o=e.sent,n&&console.log("[".concat(n,"] IN: "),o),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(2),console.error("Could not parse the regular response.",{err:e.t0,data}),e.abrupt("return",{success:!1,message:"Could not parse the regular response."});case 14:a=t.body.getReader(),i=new TextDecoder("utf-8"),c="",l="";case 18:return e.next=21,a.read();case 21:if(u=e.sent,s=u.value,f=u.done,c+=i.decode(s,{stream:!0}),!f){e.next=27;break}return e.abrupt("break",68);case 27:d=c.split("\n"),p=0;case 29:if(!(p<d.length-1)){e.next=65;break}if(0===d[p].indexOf("data: ")){e.next=32;break}return e.abrupt("continue",62);case 32:if("live"!==(m=JSON.parse(d[p].replace("data: ",""))).type){e.next=39;break}n&&console.log("[".concat(n," STREAM] LIVE: "),m),l+=m.data,r&&r(l,m.data),e.next=62;break;case 39:if("error"!==m.type){e.next=51;break}return e.prev=40,n&&console.error("[".concat(n," STREAM] ERROR: "),m.data),e.abrupt("return",{success:!1,message:m.data});case 45:return e.prev=45,e.t1=e.catch(40),console.error("Could not parse the 'error' stream.",{err:e.t1,data:m}),e.abrupt("return",{success:!1,message:"Could not parse the 'error' stream."});case 49:e.next=62;break;case 51:if("end"!==m.type){e.next=62;break}return e.prev=52,h=JSON.parse(m.data),n&&console.log("[".concat(n," STREAM] END: "),h),e.abrupt("return",h);case 58:return e.prev=58,e.t2=e.catch(52),console.error("Could not parse the 'end' stream.",{err:e.t2,data:m}),e.abrupt("return",{success:!1,message:"Could not parse the 'end' stream."});case 62:p++,e.next=29;break;case 65:c=d[d.length-1],e.next=18;break;case 68:return e.prev=68,y=JSON.parse(c),n&&console.log("[".concat(n," STREAM] IN: "),y),e.abrupt("return",y);case 74:return e.prev=74,e.t3=e.catch(68),console.error("Could not parse the buffer.",{err:e.t3,buffer:c}),e.abrupt("return",{success:!1,message:"Could not parse the buffer."});case 78:case"end":return e.stop()}}),e,null,[[2,10],[40,45],[52,58],[68,74]])}))),ft.apply(this,arguments)}function dt(e,t,r,n){return pt.apply(this,arguments)}function pt(){return(pt=at(rt().mark((function e(t,r,n,o){var i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={"Content-Type":"application/json"},n&&(i["X-WP-Nonce"]=n),o&&(i.Accept="text/event-stream"),e.next=5,fetch("".concat(t),{method:"POST",headers:i,body:a(r)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ut(!0),2),t=e[0],r=e[1];lt((function(){var e=setTimeout((function(){var e=setInterval((function(){r((function(e){return!e}))}),500);return function(){return clearInterval(e)}}),200);return function(){return clearTimeout(e)}}),[]);var n={opacity:t?1:0,width:"1px",height:"1em",borderLeft:"8px solid",marginLeft:"2px"};return React.createElement("span",{style:n})},ht=function(e){var t,r=e.content,n=e.error,o=e.isStreaming,a=e.baseClass,i=void 0===a?"mwai-output-handler":a,c=null!==(t=n||r)&&void 0!==t?t:"";(c.match(/```/g)||[]).length%2!=0?c+="\n```":o&&(c+="<BlinkingCursor />");var l=ct((function(){var e=[i];return n&&e.push("mwai-error"),e}),[n]),u=ct((function(){return{wrapper:"div",forceWrapper:!0,overrides:{BlinkingCursor:{component:mt},a:{props:{target:"_blank"}}}}}),[]);return React.createElement(et,{options:u,className:l.join(" "),children:c})};function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(){vt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new R(n||[]);return o(i,"_invoke",{value:A(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==r&&n.call(k,i)&&(w=k);var E=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==yt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?h:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(yt(t)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(E),u(E,l,"Generator"),u(E,i,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wt(e,t,r){return t=function(e){var t=function(e,t){if("object"!=yt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yt(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function kt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xt(a,n,o,i,c,"next",e)}function c(e){xt(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Et(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){if(e){if("string"==typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(e,t):void 0}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt=wp.element,Lt=jt.render,Tt=jt.useEffect,Rt=jt.useRef,Nt=jt.useState,It=jt.useMemo,Ct={background:"#711f1f",color:"#fff",padding:"15px 30px",borderRadius:"10px",margin:"10px 0 0 0"};const qt=function(e){var t=e.system,r=e.params,n=(e.theme,St(Nt(!1),2)),o=n[0],a=n[1],i=St(Nt(!1),2),c=i[0],l=i[1],u=St(Nt({}),2),s=u[0],f=u[1],d=Rt(null),p=Rt(null),m=St(Nt(),2),h=m[0],y=m[1],v=St(Nt([]),2),g=v[0],b=v[1],w=t.id,x=t.stream,k=void 0!==x&&x,E=t.formId,S=t.sessionId,O=t.contextId,A=t.restNonce,j=t.restUrl,L=t.debugMode,T=r.label,R=r.outputElement,N=r.inputs,I=function(e,t){return!(e.required&&(!t||""===t))},C=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!==(t=e.field)&&void 0!==t?t:e.selector,o=null;if(e.field||(Et(e.element.querySelectorAll('input[type="checkbox"]')).length>0&&(e.subType="checkbox"),Et(e.element.querySelectorAll('input[type="radio"]')).length>0&&(e.subType="radio"),e.element.querySelector("select")&&(e.subType="select")),"checkbox"===e.subType)o=Et(e.element.querySelectorAll('input[type="checkbox"]')).filter((function(e){return e.checked})).map((function(e){return e.value})),L&&console.log("AI Forms: Form ".concat(w," => Checkbox Updated"),{key:n,newVal:o,currentVal:r,subType:e.subType,inputElement:e});else if("radio"===e.subType){var a=Et(e.element.querySelectorAll('input[type="radio"]')).find((function(e){return e.checked}));o=a?a.value:null,L&&console.log("AI Forms: Form ".concat(w," => Radio Updated"),{key:n,newVal:o,currentVal:r,subType:e.subType,inputElement:e})}else"select"===e.subType?(o=e.element.querySelector("select").value,L&&console.log("AI Forms: Form ".concat(w," => Select Updated"),{key:n,newVal:o,currentVal:r,subType:e.subType,inputElement:e})):e.field?(o=e.element.querySelector(e.subType).value,L&&console.log("AI Forms: Form ".concat(w," => Field Updated"),{key:n,newVal:o,currentVal:r,subType:e.subType,inputElement:e})):e.selector?((o=e.element.textContent.trim())||(o=e.element.value),L&&console.log("AI Forms: Form ".concat(w," => Selector Updated"),{key:n,newVal:o,currentVal:r,subType:e.subType,inputElement:e})):console.error("AI Forms: Cannot recognize the changes on this inputElement.",{key:n,currentVal:r,inputElement:e});return o};Tt((function(){var e=function(){var e=d.current.closest(".mwai-form-container");if(N&&(N.selectors.length||N.fields.length)){p.current=e;var t=[];N.selectors.forEach((function(e){var r=document.querySelector(e);if(r){var n="true"===r.getAttribute("data-form-required");n||r.querySelector("[required]")&&(n=!0),t.push({selector:e,element:r,required:n})}else b((function(t){return[].concat(Et(t),["The 'Input Field' (selector) was not found (".concat(e,").")])}))})),N.fields.forEach((function(e){var r=p.current.querySelector("fieldset[data-form-name='".concat(e,"']"));if(r){var n=r.getAttribute("data-form-type"),o="true"===r.getAttribute("data-form-required");o||r.querySelector("[required]")&&(o=!0),t.push({field:e,subType:n,element:r,required:o})}else b((function(t){return[].concat(Et(t),["The 'Input Field' (element) was not found (".concat(e,").")])}))}));var r={};t.forEach((function(e){var t,n=null!==(t=e.field)&&void 0!==t?t:e.selector,o=C(e);r[n]={value:o,isValid:I(e,o),isRequired:e.required}})),f(r),t.forEach((function(e){e.element.addEventListener("change",(function(){q(e)})),e.element.addEventListener("keyup",(function(){q(e)})),e.selector&&new MutationObserver((function(){q(e)})).observe(e.element,{childList:!0,subtree:!0})}))}else b((function(e){return[].concat(Et(e),["The 'Inputs' are not defined."])}))};return"complete"===document.readyState?e():window.addEventListener("load",e),function(){window.removeEventListener("load",e)}}),[N]);var q=function(){var e=kt(vt().mark((function e(t){var r,n,o,a,i,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null!==(r=t.field)&&void 0!==r?r:t.selector,i=null!==(n=null===(o=s[a])||void 0===o?void 0:o.value)&&void 0!==n?n:null,c=C(t,i),i!==c&&f((function(e){return bt(bt({},e),{},wt({},a,{value:c,isValid:I(t,c),isRequired:t.required}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Tt((function(){if(0!==Object.keys(s).length){L&&console.log("Fields Updated",s);var e=Object.values(s).every((function(e){return e.isValid}));l(e)}}),[s]),Tt((function(){var e=document.querySelector(R);if(h)if(e)if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName){var t=h.success,r=h.reply,n=h.message;Lt(t?React.createElement(ht,{baseClass:"mwai-form-output",content:r,isStreaming:o&&k}):React.createElement(ht,{baseClass:"mwai-form-output",error:n,isStreaming:o&&k}),e)}else e.value=h.reply;else g.includes("The 'Output' was not found (".concat(null!=R?R:"N/A",")."))||b((function(e){return[].concat(Et(e),["The 'Output' was not found (".concat(null!=R?R:"N/A",").")])}))}),[o,k,h]);var P=function(){var e=kt(vt().mark((function e(){var t,r,n,o,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),y({success:!0,reply:""}),t={},Object.keys(s).forEach((function(e){t[e]=s[e].value})),r={id:w,formId:E,session:S,contextId:O,stream:k,fields:t},e.prev=5,L&&console.log("[FORMS] OUT: ",r),n=k?function(e){y({success:!0,reply:e})}:null,e.next=10,dt("".concat(j,"/mwai-ui/v1/forms/submit"),r,A,k);case 10:return o=e.sent,e.next=13,st(o,n,L?"FORMS":null);case 13:i=e.sent,y(i),L&&console.log("[FORMS] IN: ",i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.error("An error happened in the handling of the forms response.",{err:e.t0});case 21:return e.prev=21,a(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),_=It((function(){var e=["mwai-form-submit"];return o&&e.push("mwai-loading"),e}),[o]);return React.createElement("div",{ref:d,className:_.join(" ")},React.createElement("button",{id:w,disabled:!c||o,onClick:P},React.createElement("span",null,T)),g.length>0&&React.createElement("ul",{className:"mwai-forms-errors",style:Ct},g.map((function(e,t){return React.createElement("li",{key:t},e)}))))};function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _t=wp.element.useState;const Mt=function(e){var t=e.content,r=e.modCss,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(_t(!1),2),o=n[0],a=n[1];return React.createElement("div",{className:r("mwai-copy-button",{"mwai-animate":o}),onClick:function(){try{navigator.clipboard.writeText(t),a(!0),setTimeout((function(){a(!1)}),1e3)}catch(e){console.warn("Not allowed to copy to clipboard. Make sure your website uses HTTPS.",{content:t})}}},React.createElement("div",{className:r("mwai-copy-button-one")}),React.createElement("div",{className:r("mwai-copy-button-two")}))};function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t=wp.element,Ut=($t.useState,$t.useMemo);function Gt(e,t){if(e){if("string"==typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(e,t):void 0}}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$t.useEffect,$t.useRef;var zt=wp.element,Dt=zt.useEffect,Bt=zt.useRef,Ht=zt.useState;const Jt=function(e){e.system;var t=e.params,r=(e.theme,t.id),n=t.copyButton,o=t.className,a="".concat("mwai-form-field-output").concat(o?" "+o:""),i=function(){var e=Ut((function(){return function(e,t){return Array.isArray(e)||(e=[e]),t&&Object.entries(t).forEach((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=r[0];r[1]&&e.push(n)})),e.join(" ")}}),[]);return{modCss:e}}(),c=i.modCss,l=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Ht((function(){var e;return null!=f&&null!==(e=f.current)&&void 0!==e&&e.textContent?f.current.textContent:""})),2),u=l[0],s=l[1],f=Bt(null);return Dt((function(){var e=new MutationObserver((function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gt(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;)"childList"===t.value.type&&s(f.current.innerText)}catch(e){r.e(e)}finally{r.f()}}));return f.current&&e.observe(f.current,{childList:!0,subtree:!0}),function(){return e.disconnect()}}),[]),React.createElement("div",{style:{position:"relative"}},React.createElement("div",{ref:f,id:r,className:a}),n&&React.createElement(Mt,{content:u,modCss:c}))};var Wt=wp.element.render;function Xt(e){if(!e)return"{}";var t=document.createElement("textarea");return t.innerHTML=e,t.value}document.addEventListener("DOMContentLoaded",(function(){function e(e,t){e.forEach((function(e){var r=JSON.parse(Xt(e.getAttribute("data-params"))),n=JSON.parse(Xt(e.getAttribute("data-system"))),o=JSON.parse(Xt(e.getAttribute("data-theme")));e.removeAttribute("data-params"),e.removeAttribute("data-system"),e.removeAttribute("data-theme"),Wt(wp.element.createElement(t,{system:n,params:r,theme:o}),e)}))}e(document.querySelectorAll(".mwai-form-field-container"),t),e(document.querySelectorAll(".mwai-form-submit-container"),qt),e(document.querySelectorAll(".mwai-form-output-container"),Jt)}))})();